# MySQL复制拓扑
imooc 5-07  
多从库会增加主库的负载
## 一主多从的复制拓扑：
#### 优点：

	1. 配置简单
	2. 分担读负载

#### 用途：

	1. 为不同的业务使用不同的从库（从库的表结构不一定跟主库相等，但数据行是跟主相等的）
	2. 将一台从库放到远程idc,用作灾备恢复
	3. 分担主库的读负载（只是读，没有写）

## 主主复制的复制拓扑

	两台服务器互为主从，两台服务器都对外提拱服务，不建议使用 

配置的注意事项：

	1. 两个主中所操作的表最好能分开 
	2. 使用下面两个参数控制自增id的生成
	
	auto_increment_increment=2#自增步长
	auto_increment_offset=[1|2]#超始id自增值
	这样就实现了：
		一台机的id是1，2，5，7，9.... 
		另一台机的id是2，4，6，8，10 ......

## 主备模式下的主主复制 

介绍：

	只有一台服务器对外提供服务，一台备份服务器处于只读状态，并且只做为热备使用，在对处提供接口的主库出现故障或者是计划性的维护时，才会进行切换。 就是使原来的备库变成主库，而原来的主库会成为新的备库，并处理只读或处于下线状态，待维护完成后重新上线。 

注意事项：

	1. 确保两台服务器上的初始化数据相同
	2.确保两台服务器上己经启动了binlog并且有不同的server id
	3.在两台服务器上启用log_slave_updates参数,从如果也是别的主都话就要这个参数

## 多主多从 

## 级联复制 

一个主备，一个备有很多从

	注意点： 如果一个主库有多个从库，就需要配置log_slave_update 参数

